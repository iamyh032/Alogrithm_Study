#include <iostream>
#include <algorithm>
using namespace std;

int TT[19][3][2] = {
    // aaaa : 2개
    {{0,1}, {0,2}, {0,3}}, // TT[0][0], T[0][1], T[0][2]
    {{1,0}, {2,0}, {3,0}}, // TT[1][0], T[1][1], T[1][2]

    // aa : 1개
    // aa
    {{0,1}, {1,0}, {1,1}},

    // aaa : 4개
    //  a
    {{0,1}, {0,2}, {1,1}},
    {{0,1}, {0,2}, {-1,1}},
    {{1,0}, {2,0}, {1,1}},
    {{1,0}, {2,0}, {1,-1}},

    // aaa : 8개
    // a
    {{0,1}, {0,2}, {1,0}},
    {{0,1}, {0,2}, {1,2}},
    {{0,1}, {0,2}, {-1,0}},
    {{0,1}, {0,2}, {-1,2}},

    {{1,0}, {2,0}, {0,1}},
    {{1,0}, {2,0}, {0,-1}},
    {{1,0}, {2,0}, {2,1}},
    {{1,0}, {2,0}, {2,-1}},

    // aa : 4개
    //  aa
    {{0,1}, {1,1}, {1,2}},
    {{0,1}, {1,0}, {1,-1}},
    {{1,0}, {1,-1}, {2,-1}},
    {{1,0}, {1,1}, {2,1}},
};

int main(){
    int N, M;
    cin >> N >> M;
    int **arr = new int*[N];
    for(int i=0; i<N; i++){
        arr[i] = new int[M];
        for(int j=0; j<M; j++){
            cin >> arr[i][j];
        }
    }

    int sum =0;

    for(int i=0; i<N; i++){
        for(int j=0; j<M; j++){
            for(int k=0; k<19; k++){
                if(j+TT[k][0][0]<0 || j+TT[k][0][0]>=M || i+TT[k][0][1]<0 || i+TT[k][0][1]>=N) {continue;}
                if(j+TT[k][1][0]<0 || j+TT[k][1][0]>=M || i+TT[k][1][1]<0 || i+TT[k][1][1]>=N) {continue;}
                if(j+TT[k][2][0]<0 || j+TT[k][2][0]>=M || i+TT[k][2][1]<0 || i+TT[k][2][1]>=N) {continue;}
                sum = max(sum, arr[i][j] + arr[i+TT[k][0][1]][j+TT[k][0][0]] + arr[i+TT[k][1][1]][j+TT[k][1][0]] + arr[i+TT[k][2][1]][j+TT[k][2][0]]);
            }
        }
    }

    cout << sum;

    for(int i=0; i<N; i++){
        delete[] arr[i];
    }
    delete[] arr;
}
